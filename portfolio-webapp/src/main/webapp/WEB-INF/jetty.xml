<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "https://www.eclipse.org/jetty/configure_10_0.dtd">

<Configure id="Server" class="org.eclipse.jetty.server.Server">
    <Arg name="threadpool"><Ref refid="threadPool"/></Arg>

    <Call name="addBean">
        <Arg><Ref refid="byteBufferPool"/></Arg>
    </Call>


    <Call name="addBean">
        <Arg>
            <New class="org.eclipse.jetty.util.thread.ScheduledExecutorScheduler">
                <Arg name="name"><Property name="jetty.scheduler.name"/></Arg>
                <Arg name="daemon" type="boolean"><Property name="jetty.scheduler.daemon" default="false" /></Arg>
                <Arg name="threads" type="int"><Property name="jetty.scheduler.threads" default="-1" /></Arg>
            </New>
        </Arg>
    </Call>

    <New id="httpConfig" class="org.eclipse.jetty.server.HttpConfiguration">
        <Set name="secureScheme" property="jetty.httpConfig.secureScheme"/>
        <Set name="securePort" property="jetty.httpConfig.securePort"/>
        <Set name="outputBufferSize" property="jetty.httpConfig.outputBufferSize"/>
        <Set name="outputAggregationSize" property="jetty.httpConfig.outputAggregationSize"/>
        <Set name="requestHeaderSize" property="jetty.httpConfig.requestHeaderSize"/>
        <Set name="responseHeaderSize" property="jetty.httpConfig.responseHeaderSize"/>
        <Set name="sendServerVersion" property="jetty.httpConfig.sendServerVersion"/>
        <Set name="sendDateHeader"><Property name="jetty.httpConfig.sendDateHeader" default="false"/></Set>
        <Set name="headerCacheSize" property="jetty.httpConfig.headerCacheSize"/>
        <Set name="delayDispatchUntilContent" property="jetty.httpConfig.delayDispatchUntilContent"/>
        <Set name="maxErrorDispatches" property="jetty.httpConfig.maxErrorDispatches"/>
        <Set name="persistentConnectionsEnabled" property="jetty.httpConfig.persistentConnectionsEnabled"/>
        <Set name="httpCompliance"><Call class="org.eclipse.jetty.http.HttpCompliance" name="from"><Arg><Property name="jetty.httpConfig.compliance" deprecated="jetty.http.compliance" default="RFC7230"/></Arg></Call></Set>
        <Set name="uriCompliance"><Call class="org.eclipse.jetty.http.UriCompliance" name="from"><Arg><Property name="jetty.httpConfig.uriCompliance" default="SAFE"/></Arg></Call></Set>
        <Set name="requestCookieCompliance"><Call class="org.eclipse.jetty.http.CookieCompliance" name="valueOf"><Arg><Property name="jetty.httpConfig.requestCookieCompliance" default="RFC6265"/></Arg></Call></Set>
        <Set name="responseCookieCompliance"><Call class="org.eclipse.jetty.http.CookieCompliance" name="valueOf"><Arg><Property name="jetty.httpConfig.responseCookieCompliance" default="RFC6265"/></Arg></Call></Set>
        <Set name="relativeRedirectAllowed"><Property name="jetty.httpConfig.relativeRedirectAllowed" default="false"/></Set>
        <Set name="useInputDirectByteBuffers" property="jetty.httpConfig.useInputDirectByteBuffers"/>
        <Set name="useOutputDirectByteBuffers" property="jetty.httpConfig.useOutputDirectByteBuffers"/>
    </New>

    <Set name="handler">
        <New id="Handlers" class="org.eclipse.jetty.server.handler.HandlerList">
            <Set name="handlers">
                <Array type="org.eclipse.jetty.server.Handler">
                    <Item>
                        <New id="Contexts" class="org.eclipse.jetty.server.handler.ContextHandlerCollection"/>
                    </Item>
                    <Item>
                        <New id="DefaultHandler" class="org.eclipse.jetty.server.handler.DefaultHandler"/>
                    </Item>
                </Array>
            </Set>
        </New>
    </Set>

    <Set name="stopAtShutdown"><Property name="jetty.server.stopAtShutdown" default="true"/></Set>
    <Set name="stopTimeout"><Property name="jetty.server.stopTimeout" default="5000"/></Set>
    <Set name="dumpAfterStart" property="jetty.server.dumpAfterStart"/>
    <Set name="dumpBeforeStop" property="jetty.server.dumpBeforeStop"/>

</Configure>