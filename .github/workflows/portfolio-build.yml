name: Build Portfolio application

on:
  push:
    branches:
      - main
      - master

jobs:
  build:
    name: Build entire project
    runs-on: ubuntu-latest
    steps:
      - name: Print a message
        env:
          MESSAGE: Launching the Maven build for the Portfolio application
        run: echo $MESSAGE.
      - name: Checkout repository
        uses: actions/checkout@v2  # Ensure the repository is checked out
      - name: run mvn install
        working-directory: ./portfolio  # Adjust the working directory to the parent project
        run: mvn clean install

  npm_build:
    name: Build front
    runs-on: ubuntu-latest
    steps:
      - name: Print a message
        env:
          MESSAGE: Launching the npm build for the Portfolio-client application
        run: echo $MESSAGE.
      - name: Checkout repository
        uses: actions/checkout@v2  # Ensure the repository is checked out
      - name: run npm install 
        working-directory: ./portfolio-client  # Adjust the working directory to the front-end project
        run: npm install
      - name: run npm build
        working-directory: ./portfolio-client  # Adjust the working directory to the front-end project
        run: npm run build

